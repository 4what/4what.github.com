<!DOCTYPE html>
<html>
<head>
<meta charset="UTF-8" />
<title></title>
<meta name="author" content="4what" />

<meta name="viewport" content="width=640, user-scalable=no" />

<script type="text/javascript" src="js/jquery/jquery-1.8.3.min.js"></script>

<link rel="stylesheet" type="text/css" href="js/jquery/mobile/jquery.mobile-1.4.4.min.css" />
<script type="text/javascript" src="js/jquery/mobile/jquery.mobile-1.4.4.min.js"></script>

<script type="text/javascript" src="js/util.js"></script>

<link rel="stylesheet" type="text/css" href="css/style.css" />

<script type="text/javascript">
$(window).load(function() {

	console.log($js.timer(function() {

	var
	spots = $("#game li"),

	h_max = 640,
	w_max = 640,

	d_max = 80,
	d_min = 40,

	x, y, x2, y2;

	var arr = [];

	function gp(d) {
		x = $js.random(0, w_max - d_max, true);
		y = $js.random(0, h_max - d_max, true);
		x2 = x + d;
		y2 = y + d;

		var valid = true;

		for (var item, i = arr.length - 1; i >= 0; i--) {
			item = arr[i];

			valid = true;

			if ((x < item.x2 && x2 > item.x) && (y < item.y2 && y2 > item.y)) {
				valid = false;

				break;
			}
		}

		if (!valid) {
			gp(d);
		}
	}

	spots.each(function(i) {
		var d = $js.random(d_min, d_max, true);

		gp(d);

		arr.push({
			x: x,
			y: y,
			x2: x2,
			y2: y2
		});

		$(this).css({
			height: d,
			left: arr[i].x,
			top: arr[i].y,
			width: d
		});
	}).on("vmousedown", function() {
		$(this).css("background", "#fff");
	});

	}))

});
</script>
</head>

<body>

<ul id="game">
	<li></li><li></li><li></li><li></li><li></li><li></li><li></li><li></li><li></li><li></li>
	<li></li><li></li><li></li><li></li><li></li><li></li><li></li><li></li><li></li><li></li>
	<li></li><li></li><li></li><li></li><li></li><li></li><li></li><li></li><li></li><li></li>
	<li></li><li></li><li></li><li></li><li></li><li></li><li></li><li></li><li></li><li></li>
	<li></li><li></li><li></li><li></li><li></li><li></li><li></li><li></li><li></li><li></li>
</ul>

</body>
</html>
