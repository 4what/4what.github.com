<!DOCTYPE html>
<html>
<head>
<meta charset="UTF-8" />
<title></title>
<meta name="author" content="4what" />

<meta name="viewport" content="initial-scale=1.0, width=device-width, user-scalable=no" />

<link rel="stylesheet" type="text/css" href="js/swiper/3.1.0/swiper.min.css" />
<link rel="stylesheet" type="text/css" href="js/swiper/plugin/animate.min.css" />

<link rel="stylesheet" type="text/css" href="css/style.css" />
</head>

<body>
<div class="swiper-container">
	<div class="swiper-wrapper">
		<div class="swiper-slide">
			<!--<img src="images/us.jpg" alt="" id="us" class="zoom" />-->
			<div class="subtitle" style="font-size: 18px; font-weight: bold;">
				本故事并非虚构<br />
				如有雷同纯属巧合
			</div>
			<div class="subtitle">
				爱一个人的同时就赋予了对方伤害你的权力
			</div>
			<div class="subtitle">
				伤得痛了哭得累了之后…
			</div>
		</div>
		<div class="swiper-slide">
			<div class="ios-view messages">
				<div class="statusbar">
					<span class="carrier">Carrier</span>
					<span class="wifi"></span>
					<span class="clock">12:00 PM</span>
					<span class="battery"></span>
				</div>
				<div class="navbar">
					<span class="leftbutton">Edit</span>
					<span class="title">Messages</span>
					<span class="rightbutton compose"></span>
				</div>
				<div class="searchbar"><span><em>Search</em></span></div>
				<ul class="table">
					<li id="message-will-delete">
						<div class="wrapper">
							<span class="from">她 ❤</span>
							<span class="date">Yesterday</span>
							<p>一切都失去了意义，宁愿回到一无所有...什么都可以拉黑，回忆呢？</p>
						</div>
						<span class="delete"><em>Delete</em></span>
					</li>
					<li>
						<div class="wrapper">
							<span class="from">不重要</span>
							<span class="date">Sunday</span>
							<p>无所谓</p>
						</div>
					</li>
				</ul>
			</div>
		</div>
		<div class="swiper-slide">
			<div class="ios-view contacts">
				<div class="statusbar">
					<span class="carrier">Carrier</span>
					<span class="wifi"></span>
					<span class="clock">12:00 PM</span>
					<span class="battery"></span>
				</div>
				<div class="navbar">
					<span class="leftbutton back">All Contacts</span>
					<span class="title"></span>
					<span class="rightbutton">Edit</span>
				</div>
				<div class="name">她 ❤</div>
				<ul class="table">
					<li class="info">
						<div class="wrapper">
							<span class="label">mobile</span>
							<span class="detail">152-<em>0000</em>-9280</span>
							<span class="send"></span>
							<span class="call"></span>
						</div>
					</li>
					<li class="notes">
						<div class="wrapper">
							Notes
							<br />
							<br />
							<br />
						</div>
					</li>
					<li>
						<div class="wrapper">
							<span class="button">Send Message</span>
						</div>
					</li>
					<li>
						<div class="wrapper">
							<span class="button">Share Contact</span>
						</div>
					</li>
					<li id="contact-block-button">
						<div class="wrapper">
							<br />
							<br />
							<span class="button">Block this Caller</span>
						</div>
					</li>
				</ul>
				<ul class="tabbar">
					<li style='background-image: url("images/ios-favorites.png");'><span>Favorites</span></li>
					<li style='background-image: url("images/ios-recents.png");'><span>Recents</span></li>
					<li class="highlight" style='background-image: url("images/ios-contacts-h.png");'><span>Contacts</span></li>
					<li style='background-image: url("images/ios-keypad.png");'><span>Keypad</span></li>
				</ul>
				<div id="contact-actionsheet">
					<div class="overlay"></div>
					<div class="actionsheet" style="bottom: -200px;">
						<span class="title"><em>You will not receive phone calls, messages, or FaceTime from people on the block list.</em></span>
						<span class="destructive" id="contact-actionsheet-block-button">Block Contact</span>
						<span class="cancel">Cancel</span>
					</div>
				</div>
			</div>
		</div>
		<div class="swiper-slide">
			<div class="subtitle">
				却如何抹掉脑海深处的刻骨铭心…
			</div>
		</div>
		<div class="swiper-slide">
			<!--<div class="ani" swiper-animate-effect="zoomIn" swiper-animate-duration="4s" swiper-animate-delay="1s"><img src="images/us.jpg" alt="" id="us" /></div>-->
			<div class="subtitle">
				我们…
			</div>
			<img src="images/us.jpg" alt="" id="us" />
		</div>
	</div>
	<!--<div class="swiper-pagination"></div>-->
	<div id="arrow"><span></span></div>
</div>

<audio src="bgm.mp3" autoplay="autoplay" loop="loop" id="bgm"></audio>

<!--<script type="text/javascript" src="js/swiper/3.1.0/swiper.min.js"></script>-->

<script type="text/javascript" src="js/jquery/jquery-2.0.3.min.js"></script>
<script type="text/javascript" src="js/swiper/3.1.0/swiper.jquery.min.js"></script>

<script type="text/javascript" src="js/swiper/plugin/swiper.animate1.0.2.min.js"></script>

<script type="text/javascript">
$(document).one("touchstart", function() {
	document.getElementById("bgm").play();
});


var album = "";
for (var i = 0; i < 86; i++) {
	album += '<div class="swiper-slide"><img data-src="images/p-' + (i + 1) + '.jpg" alt="" class="photo swiper-lazy" /><div class="swiper-lazy-preloader"></div></div>';
}
$(".swiper-slide:last").before(album);


var
subtitle = $(".subtitle"),

swiper = new Swiper(".swiper-container", {
	direction: "vertical",
	initialSlide: 0,

	keyboardControl: true,
	mousewheelControl: true,

	//slidesPerView: auto,

	lazyLoading: true,
	lazyLoadingInPrevNext: true,
	preloadImages: false,

	//pagination: ".swiper-pagination"
	//paginationClickable: true,

	onInit: function(swiper) {
		swiperAnimateCache(swiper);
		swiperAnimate(swiper);

		swiper.lockSwipeToNext();
		swiper.lockSwipeToPrev();

		subtitle.eq(0).delay(1000).fadeIn(1000 * 4).delay(1000).fadeOut(1000 * 2, function() {
			subtitle.eq(1).delay(1000).fadeIn(1000 * 4).delay(1000).fadeOut(1000 * 2, function() {
				subtitle.eq(2).delay(1000).fadeIn(1000 * 4).delay(1000).fadeOut(1000 * 2, function() {
					setTimeout(function() {
						swiper.unlockSwipeToNext();
						swiper.slideNext();
						swiper.lockSwipeToNext();
					}, 1000 * 0.5);
				});
			});
		});
	},
	onSlideChangeEnd: function(swiper) {
		swiperAnimate(swiper);

		switch (swiper.activeIndex) {
			case 1:
				$(".wrapper", "#message-will-delete").delay(1000 * 4).animate({
					"left": "-=80"
				}, 1000 * 0.2, function() {
					$("#message-will-delete").delay(1000).slideUp(1000 * 0.1, function() {
						setTimeout(function() {
							swiper.unlockSwipeToNext();
							swiper.slideNext();
							swiper.lockSwipeToNext();
						}, 1000 * 2);
					});
				});
				break;
			case 2:
				setTimeout(function() {
					$("#contact-block-button").addClass("selected");
					$(".overlay", "#contact-actionsheet").delay(1000 * 0.1).show(0, function() {
						$("#contact-block-button").removeClass("selected");
						setTimeout(function() {
							$(".actionsheet", "#contact-actionsheet").animate({
								"bottom": 0
							}, 1000 * 0.15, function() {
								setTimeout(function() {
									$("#contact-actionsheet-block-button").addClass("selected");
									setTimeout(function() {
										$("#contact-actionsheet-block-button").removeClass("selected");
										$("#contact-actionsheet").hide(0, function() {
											$(".button", "#contact-block-button").delay(1000 * 0.5).fadeOut(function() {
												$(this).text("Unblock this Caller");
											}).fadeIn(function() {
												setTimeout(function() {
													swiper.unlockSwipeToNext();
													swiper.slideNext();
													swiper.lockSwipeToNext();
												}, 1000 * 2);
											});
										});
									}, 1000 * 0.1);
								}, 1000);
							});
						}, 1000 * 0.1);
					});
				}, 1000 * 2);
				break;
			case 3:
				subtitle.eq(3).delay(1000).fadeIn(1000 * 4).delay(1000).fadeOut(1000 * 2, function() {
					setTimeout(function() {
						swiper.unlockSwipeToNext();
						swiper.slideNext();
						//swiper.lockSwipeToNext();
					}, 1000 * 0.5);
				});
				break;
			default:
				break;
		}

		if (swiper.isEnd) {
			subtitle.eq(4).delay(1000).fadeIn(1000 * 4).delay(1000).fadeOut(1000 * 2, function() {
				setTimeout(function() {
					$("#us").show(0).addClass("animation-us");
				}, 1000 * 0.5);
			});
		}
	},
	onSlideChangeStart: function(swiper) {
		switch (swiper.activeIndex) {
			case 4:
				swiper.lockSwipeToPrev();
				break;
			case 5:
				swiper.unlockSwipeToPrev();
				break;
			default:
				break;
		}
		$("#arrow").toggle(!(swiper.activeIndex < 4 || swiper.isEnd));
	}
});
</script>
</body>
</html>
