function SetWechatShare(a, b, c, d, e) { WechatShareTitle = a, WechatShareContent = b, WechatShareUrl = c, WechatShareImgUrl = d, WechatShareSuccessCallBack = e, "" == WechatShareUrl || void 0 == WechatShareUrl ? WechatShareUrl = window.location.href : WechatShareUrl.indexOf("http:") < 0 && (WechatShareUrl = Cmn.Func.GetAbsoluteUrl(WechatShareUrl)), void 0 != WechatShareImgUrl && WechatShareImgUrl.indexOf("http:") < 0 && (WechatShareImgUrl = Cmn.Func.GetAbsoluteUrl(d)) } function viewProfile(a) { "undefined" != typeof WeixinJSBridge && WeixinJSBridge.invoke && WeixinJSBridge.invoke("profile", { username: a, scene: "57" }) } var WechatShareUrl = window.location.href, WechatShareImgUrl = "", WechatShareTitle = "", WechatShareContent = "", WechatShareSuccessCallBack = void 0; WechatShareType = { appmessage: "appmessage", timeline: "timeline", weibo: "weibo", facebook: "facebook" }, function () { function a() { WeixinJSBridge.on("menu:share:appmessage", function () { WeixinJSBridge.invoke("sendAppMessage", { img_url: WechatShareImgUrl, img_width: "640", img_height: "640", link: WechatShareUrl, desc: WechatShareContent, title: WechatShareTitle }, function (a) { a.err_msg.indexOf(":ok") > 0 && void 0 != WechatShareSuccessCallBack && WechatShareSuccessCallBack(WechatShareType.appmessage) }) }), WeixinJSBridge.on("menu:share:timeline", function () { WeixinJSBridge.invoke("shareTimeline", { img_url: WechatShareImgUrl, img_width: "640", img_height: "640", link: WechatShareUrl, desc: WechatShareContent, title: WechatShareTitle }, function (a) { a.err_msg.indexOf(":ok") > 0 && void 0 != WechatShareSuccessCallBack && WechatShareSuccessCallBack(WechatShareType.timeline) }) }), WeixinJSBridge.on("menu:share:weibo", function () { WeixinJSBridge.invoke("shareWeibo", { content: WechatShareTitle + WechatShareContent, url: WechatShareUrl }, function (a) { a.err_msg.indexOf(":ok") > 0 && void 0 != WechatShareSuccessCallBack && WechatShareSuccessCallBack(WechatShareType.weibo) }) }), WeixinJSBridge.on("menu:share:facebook", function () { WeixinJSBridge.invoke("shareFB", { img_url: WechatShareImgUrl, img_width: "640", img_height: "640", link: WechatShareUrl, desc: WechatShareContent, title: WechatShareTitle }, function (a) { a.err_msg.indexOf(":ok") > 0 && void 0 != WechatShareSuccessCallBack && WechatShareSuccessCallBack(WechatShareType.facebook) }) }), WeixinJSBridge.on("menu:general:share", function (a) { var b = 0; switch (a.shareTo) { case "friend": b = 1; break; case "timeline": b = 2; break; case "weibo": b = 3 } a.generalShare({ appid: "", img_url: WechatShareImgUrl, img_width: "640", img_height: "640", link: WechatShareUrl, desc: WechatShareContent, title: WechatShareTitle }, function (a) { a.err_msg.indexOf(":ok") > 0 && void 0 != WechatShareSuccessCallBack && (1 == b ? WechatShareSuccessCallBack(WechatShareType.appmessage) : 2 == b ? WechatShareSuccessCallBack(WechatShareType.timeline) : 3 == b && WechatShareSuccessCallBack(WechatShareType.weibo)) }) }) } document.addEventListener ? document.addEventListener("WeixinJSBridgeReady", a, !1) : document.attachEvent && (document.attachEvent("WeixinJSBridgeReady", a), document.attachEvent("onWeixinJSBridgeReady", a)) }();