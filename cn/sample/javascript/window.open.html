<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml">
<head>
<meta http-equiv="Content-Type" content="text/html; charset=UTF-8" />
<title>4what - JavaScript</title>
<meta name="author" content="4what" />

<link rel="stylesheet" type="text/css" href="../../css/sample.css" />
<script type="text/javascript" src="../../js/util.js"></script>
<script type="text/javascript" src="../../js/4what.core.js"></script>
<script type="text/javascript" src="../../js/sample.js"></script>
</head>

<body>

<h2>Summary</h2>
	<p>
		window.open
	</p>

<h2>Syntax</h2>
	<textarea cols="" rows="" name="code" class="html">
	<input type="button" name="" value="Open" id="open" />

	<input type="button" name="" value="Close" id="close" />

	<input type="button" name="" value="Child" id="child" />
	</textarea>

	<textarea cols="" rows="" name="code" class="js">
	<script type="text/javascript">
	var popup = function() {
		this.close = function() {
			if (this.child && !this.child.closed) {
				this.child.close();
			}
		};
		/**
		 * @param {String} url
		 * @param {String} name (optional)
		 * @param {String} features (optional)
		 */
		this.open = function(url, name, features) {
			if (!this.child || this.child.closed) {
				this.child = window.open(url, name, features);
			} else {
				this.child.focus();
			}
		}
	};

	var p = new popup();

	function doOpen() {
		p.open(
			"window.open/child.html" + "?timestamp=" + new Date().getTime(),
			"",
			"height=0,left=0,resizable=no,scrollbars=no,top=0,width=0"
		);
	}
	document.getElementById("open").onclick = doOpen;

	function doClose() {
		p.close();
	}
	document.getElementById("close").onclick = doClose;

	function getChild() {
		alert(p.child);
		//alert(p.child.document);
	}
	document.getElementById("child").onclick = getChild;
	</script>
	</textarea>

<h2>Example</h2>
	<input type="button" name="" value="Open" id="open" />

	<input type="button" name="" value="Close" id="close" />

	<input type="button" name="" value="Child" id="child" />

	<script type="text/javascript">
	var popup = function() {
		this.close = function() {
			if (this.child && !this.child.closed) {
				this.child.close();
			}
		};
		/**
		 * @param {String} url
		 * @param {String} name (optional)
		 * @param {String} features (optional)
		 */
		this.open = function(url, name, features) {
			if (!this.child || this.child.closed) {
				this.child = window.open(url, name, features);
			} else {
				this.child.focus();
			}
		}
	};

	var p = new popup();

	function doOpen() {
		p.open(
			"window.open/child.html" + "?timestamp=" + new Date().getTime(),
			"",
			"height=0,left=0,resizable=no,scrollbars=no,top=0,width=0"
		);
	}
	document.getElementById("open").onclick = doOpen;

	function doClose() {
		p.close();
	}
	document.getElementById("close").onclick = doClose;

	function getChild() {
		alert(p.child);
		//alert(p.child.document);
	}
	document.getElementById("child").onclick = getChild;
	</script>

<script type="text/javascript" src="../../js/analytics.js"></script>
</body>
</html>
