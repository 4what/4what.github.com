<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml">
<head>
<meta http-equiv="Content-Type" content="text/html; charset=UTF-8" />
<title>4what - HTML5</title>
<meta name="author" content="4what" />

<link rel="stylesheet" type="text/css" href="../../../css/sample.css" />
<script type="text/javascript" src="../../../js/util.js"></script>
<script type="text/javascript" src="../../../js/4what.core.js"></script>
<script type="text/javascript" src="../../../js/sample.js"></script>
</head>

<body>

<h2>Specification</h2>
	<p></p>

<h2>Syntax</h2>
	<textarea cols="" rows="" name="code" class="js">
	<script type="text/javascript">
	var iframe = document.createElement("iframe");
	iframe.src = "http://www.example.com:8080/studio/project/4what.cn/sample/html5/window.postmessage/iframe.html";
	//iframe.style.display = "none";

	document.body.appendChild(iframe);

	iframe.onload = function() {
		iframe.contentWindow.postMessage(new Date(), "http://www.example.com:8080");
	};

	function receiver(e) {
		if (e.origin !== "http://www.example.com:8080") {
			//return;
		}

		alert("e.data: " + e.data);
		alert("e.origin: " + e.origin);
	}

	try {
		window.addEventListener("message", receiver, false);
	} catch (e) {
		window.attachEvent("onmessage", receiver);
	}
	</script>
	</textarea>

<h2>Example</h2>
	<script type="text/javascript">
	var iframe = document.createElement("iframe");
	iframe.src = "http://www.example.com:8080/studio/project/4what.cn/sample/html5/window.postmessage/iframe.html";
	//iframe.style.display = "none";

	document.body.appendChild(iframe);

	iframe.onload = function() {
		iframe.contentWindow.postMessage(new Date(), "http://www.example.com:8080");
	};

	function receiver(e) {
		if (e.origin !== "http://www.example.com:8080") {
			//return;
		}

		alert("e.data: " + e.data);
		alert("e.origin: " + e.origin);
	}

	try {
		window.addEventListener("message", receiver, false);
	} catch (e) {
		window.attachEvent("onmessage", receiver);
	}
	</script>

<script type="text/javascript" src="../../../js/analytics.js"></script>
</body>
</html>
